# ğŸ¢ JoyAgent-JDGenie å†…ç½‘ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+ / CentOS 7+)
- **Java**: JDK 8+ æˆ– JDK 11+
- **Maven**: 3.6+
- **å†…å­˜**: 8GB+
- **å­˜å‚¨**: 100GB+
- **ç½‘ç»œ**: å†…ç½‘ç¯å¢ƒ

### 2. å†…ç½‘æœåŠ¡è¦æ±‚
- **LLMæœåŠ¡**: å†…ç½‘å¤§è¯­è¨€æ¨¡å‹æœåŠ¡
- **TTSæœåŠ¡**: å†…ç½‘æ–‡æœ¬è½¬è¯­éŸ³æœåŠ¡
- **æ•°æ®åº“**: é¡¹ç›®ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œæ— éœ€é…ç½®
- **Redis**: é¡¹ç›®ä¸ä½¿ç”¨Redisï¼Œæ— éœ€é…ç½®

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: ç¯å¢ƒæ£€æŸ¥
```bash
# æ£€æŸ¥Javaç¯å¢ƒ
java -version

# æ£€æŸ¥Mavenç¯å¢ƒ
mvn -version

# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
ping internal-llm-service
ping internal-db
```

### æ­¥éª¤2: ä»£ç é…ç½®ä¿®æ”¹
1. **TTSé…ç½®**: å·²ä¿®æ”¹ä¸ºå†…ç½‘TTSæœåŠ¡
2. **LLMé…ç½®**: ä¿®æ”¹ä¸ºå†…ç½‘LLMæœåŠ¡åœ°å€
3. **æ•°æ®åº“é…ç½®**: é¡¹ç›®ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œæ— éœ€é…ç½®

### æ­¥éª¤3: ç¼–è¯‘é¡¹ç›®
```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean compile

# æ‰“åŒ…é¡¹ç›®
mvn clean package -DskipTests
```

### æ­¥éª¤4: å¯åŠ¨åº”ç”¨
```bash
# æ–¹å¼1: ä½¿ç”¨å†…ç½‘ç¯å¢ƒä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./check_dep_port_internal.sh  # æ£€æŸ¥ä¾èµ–å’Œç«¯å£
./Genie_start_internal.sh     # å¯åŠ¨å†…ç½‘ç¯å¢ƒ

# æ–¹å¼2: ä½¿ç”¨åŸæœ‰çš„å¯åŠ¨è„šæœ¬
./check_dep_port.sh           # æ£€æŸ¥ä¾èµ–å’Œç«¯å£
./Genie_start.sh              # å¯åŠ¨å¤–ç½‘ç¯å¢ƒ

# æ–¹å¼3: æ‰‹åŠ¨å¯åŠ¨ï¼ˆä»…åç«¯ï¼‰
export SPRING_PROFILES_ACTIVE=internal
mvn spring-boot:run -Dspring-boot.run.profiles=internal
```

## ğŸ”§ é…ç½®è¯´æ˜

### 1. å†…ç½‘ç¯å¢ƒå˜é‡
```bash
# è®¾ç½®å†…ç½‘ç¯å¢ƒ
export SPRING_PROFILES_ACTIVE=internal

# å†…ç½‘LLMæœåŠ¡å¯†é’¥
export INTERNAL_LLM_API_KEY="your-internal-llm-key"

# å†…ç½‘TTSæœåŠ¡å¯†é’¥
export INTERNAL_TTS_API_KEY="your-internal-tts-key"

# å†…ç½‘æ•°æ®åº“é…ç½® - é¡¹ç›®ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œæ— éœ€è®¾ç½®
# export INTERNAL_DB_USERNAME="genie_user"
# export INTERNAL_DB_PASSWORD="genie_password"
# export INTERNAL_REDIS_PASSWORD="your-redis-password"
```

### 2. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§
1. `application-internal.yml` - å†…ç½‘ç¯å¢ƒé…ç½®
2. ç¯å¢ƒå˜é‡ - åŠ¨æ€é…ç½®
3. `application.yml` - é»˜è®¤é…ç½®

## ğŸ“ ç›®å½•ç»“æ„

```
genie-backend/
â”œâ”€â”€ workspace/           # å·¥ä½œç©ºé—´ç›®å½•
â”‚   â”œâ”€â”€ audio/          # éŸ³é¢‘æ–‡ä»¶
â”‚   â”œâ”€â”€ reports/        # æŠ¥å‘Šæ–‡ä»¶
â”‚   â””â”€â”€ files/          # å…¶ä»–æ–‡ä»¶
â”œâ”€â”€ logs/               # æ—¥å¿—ç›®å½•
â”œâ”€â”€ target/             # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ src/                # æºä»£ç 
â”œâ”€â”€ application-internal.yml  # å†…ç½‘é…ç½®
â”œâ”€â”€ start-internal.sh   # å†…ç½‘å¯åŠ¨è„šæœ¬
â””â”€â”€ Dockerfile.internal # å†…ç½‘Dockeré…ç½®
```

## ğŸ” æ•…éšœæ’æŸ¥

### 1. å¸¸è§é—®é¢˜
- **LLMæœåŠ¡è¿æ¥å¤±è´¥**: æ£€æŸ¥å†…ç½‘LLMæœåŠ¡çŠ¶æ€å’Œç½‘ç»œè¿é€šæ€§
- **TTSæœåŠ¡è¿æ¥å¤±è´¥**: æ£€æŸ¥å†…ç½‘TTSæœåŠ¡çŠ¶æ€å’Œç½‘ç»œè¿é€šæ€§
- **æ•°æ®åº“è¿æ¥å¤±è´¥**: é¡¹ç›®ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œæ— éœ€æ£€æŸ¥

### 2. æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/genie-internal.log

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
tail -f logs/genie-internal.log | grep "ERROR\|WARN"
```

### 3. å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:8080/actuator/health

# æ£€æŸ¥å„æœåŠ¡çŠ¶æ€
curl http://localhost:8080/actuator/health/readiness
curl http://localhost:8080/actuator/health/liveness
```

## ğŸ³ Dockeréƒ¨ç½²

### 1. æ„å»ºé•œåƒ
```bash
# æ„å»ºå†…ç½‘ç¯å¢ƒé•œåƒ
docker build -f Dockerfile.internal -t genie-backend-internal .

# æŸ¥çœ‹é•œåƒ
docker images | grep genie-backend-internal
```

### 2. è¿è¡Œå®¹å™¨
```bash
# è¿è¡Œå†…ç½‘ç¯å¢ƒå®¹å™¨
docker run -d \
  --name genie-backend-internal \
  -p 8080:8080 \
  -v $(pwd)/workspace:/app/workspace \
  -v $(pwd)/logs:/app/logs \
  -e SPRING_PROFILES_ACTIVE=internal \
  genie-backend-internal

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep genie-backend-internal
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ€§èƒ½ç›‘æ§
- **å†…å­˜ä½¿ç”¨**: ç›‘æ§JVMå†…å­˜ä½¿ç”¨æƒ…å†µ
- **CPUä½¿ç”¨**: ç›‘æ§CPUä½¿ç”¨ç‡
- **ç£ç›˜ä½¿ç”¨**: ç›‘æ§å·¥ä½œç©ºé—´ç£ç›˜ä½¿ç”¨æƒ…å†µ

### 2. æ—¥å¿—ç®¡ç†
- **æ—¥å¿—è½®è½¬**: é…ç½®æ—¥å¿—æ–‡ä»¶å¤§å°å’Œä¿ç•™å¤©æ•°
- **æ—¥å¿—çº§åˆ«**: æ ¹æ®ç¯å¢ƒè°ƒæ•´æ—¥å¿—çº§åˆ«
- **æ—¥å¿—å¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ—¥å¿—

### 3. å¤‡ä»½ç­–ç•¥
- **ä»£ç å¤‡ä»½**: å®šæœŸå¤‡ä»½æºä»£ç å’Œé…ç½®æ–‡ä»¶
- **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½å·¥ä½œç©ºé—´æ–‡ä»¶
- **é…ç½®å¤‡ä»½**: å¤‡ä»½ç¯å¢ƒé…ç½®å’Œå¯åŠ¨è„šæœ¬

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. ç½‘ç»œå®‰å…¨
- ç¡®ä¿å†…ç½‘ç¯å¢ƒä¸äº’è”ç½‘éš”ç¦»
- é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œåªå…è®¸å¿…è¦çš„ç«¯å£è®¿é—®
- å®šæœŸæ›´æ–°å®‰å…¨è¡¥ä¸

### 2. è®¿é—®æ§åˆ¶
- é™åˆ¶å†…ç½‘æœåŠ¡çš„è®¿é—®æƒé™
- ä½¿ç”¨å¼ºå¯†ç å’Œå¯†é’¥ç®¡ç†
- å®šæœŸè½®æ¢APIå¯†é’¥

### 3. æ•°æ®å®‰å…¨
- åŠ å¯†æ•æ„Ÿé…ç½®ä¿¡æ¯
- å®šæœŸå¤‡ä»½é‡è¦æ•°æ®
- ç›‘æ§å¼‚å¸¸è®¿é—®è¡Œä¸º

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç½‘ç»œè¿é€šæ€§å’ŒæœåŠ¡çŠ¶æ€
3. å‚è€ƒæ•…éšœæ’æŸ¥ç« èŠ‚
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æ³¨æ„**: å†…ç½‘ç¯å¢ƒéƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®ä¿æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œå¹¶è¿›è¡Œå……åˆ†çš„åŠŸèƒ½æµ‹è¯•ã€‚ 