Html:```html<!DOCTYPEhtml><htmllang="zh-CN"><head><metacharset="UTF-8"><metaname="viewport"content="width=device-width,initial-scale=1.0"><title>DorisBE节点磁盘状态深度分析报告</title><linkrel="stylesheet"href="http://static-resources/font-awesome/all.min.css"><linkrel="stylesheet"href="http://static-resources/tailwindcss/tailwind.min.css"><linkhref="http://static-resources/googleapis-fonts/css2.css"rel="stylesheet"><style>@importurl('http://static-resources/googleapis-fonts/css2.css');body{font-family:'NotoSansSC','SegoeUI',sans-serif;background-color:#f8f9fa;}.card{box-shadow:04px6px-1pxrgba(0,0,0,0.1),02px4px-1pxrgba(0,0,0,0.06);border-radius:0.5rem;transition:transform0.2sease;}.card:hover{transform:translateY(-2px);}.metric-value{font-weight:700;color:#1f2937;}.status-online{background-color:#dcfce7;color:#166534;border-left:4pxsolid#16a34a;}.status-critical{background-color:#fee2e2;color:#991b1b;border-left:4pxsolid#ef4444;}.progress-bar{height:12px;border-radius:6px;overflow:hidden;}.progress-fill{height:100%;border-radius:6px;transition:width0.3sease;}.table-container{max-height:400px;overflow-y:auto;}.table-containerth,.table-containertd{white-space:nowrap;}.badge{font-size:0.75rem;padding:0.25rem0.5rem;border-radius:9999px;}.badge-success{background-color:#d1fae5;color:#065f46;}.badge-warning{background-color:#fef3c7;color:#92400e;}.legend-item{display:flex;align-items:center;margin-bottom:0.25rem;}.legend-color{width:12px;height:12px;border-radius:50%;margin-right:0.5rem;}.section-title{border-bottom:2pxsolid#e5e7eb;padding-bottom:0.5rem;margin-bottom:1.5rem;color:#1f2937;}.data-point{font-size:0.875rem;margin-bottom:0.25rem;}.footer{margin-top:4rem;padding:1.5rem0;border-top:1pxsolid#e5e7eb;text-align:center;color:#6b7280;font-size:0.875rem;}</style></head><bodyclass="text-gray-800"><divclass="containermx-autopx-4py-8max-w-6xl"><headerclass="text-centermb-10"><h1class="text-4xlfont-boldtext-gray-900mb-4">DorisBE节点磁盘状态深度分析报告</h1><pclass="text-lgtext-gray-600">基于2025年12月11日采集的Prometheus监控数据生成</p></header><sectionclass="mb-12"><h2class="section-title">1.磁盘在线状态确认</h2><divclass="bg-whitep-6rounded-lgshadow-mdcard"><pclass="mb-4">经核查所有BE节点的<code>doris_be_disks_state</code>指标，所有磁盘路径均处于在线状态（值为1），无任何Offline（值为0）记录，系统磁盘可用性达到100%。</p><divclass="gridgrid-cols-1md:grid-cols-2lg:grid-cols-3gap-4mb-6"><divclass="p-4border-l-4border-green-500bg-green-50rounded-r-lg"><divclass="flexitems-center"><iclass="fasfa-check-circletext-green-500mr-2"></i><spanclass="font-medium">在线磁盘总数</span></div><pclass="text-2xlfont-boldtext-green-700mt-1">6</p></div><divclass="p-4border-l-4border-blue-500bg-blue-50rounded-r-lg"><divclass="flexitems-center"><iclass="fasfa-databasetext-blue-500mr-2"></i><spanclass="font-medium">BE节点数量</span></div><pclass="text-2xlfont-boldtext-blue-700mt-1">3</p></div><divclass="p-4border-l-4border-purple-500bg-purple-50rounded-r-lg"><divclass="flexitems-center"><iclass="fasfa-chart-linetext-purple-500mr-2"></i><spanclass="font-medium">监控路径总数</span></div><pclass="text-2xlfont-boldtext-purple-700mt-1">6</p></div></div><divclass="bg-gray-50p-4rounded-lg"><h3class="font-semiboldtext-gray-800mb-2">在线状态数据详情：</h3><divclass="gridgrid-cols-1md:grid-cols-2gap-2text-sm"><divclass="flexjustify-between"><span>/data0/doris/storage(172.17.237.5:8040)</span><spanclass="badgebadge-success">在线</span></div><divclass="flexjustify-between"><span>/data1/doris/storage(172.17.237.5:8040)</span><spanclass="badgebadge-success">在线</span></div><divclass="flexjustify-between"><span>/data1/doris/storage(172.17.237.6:8040)</span><spanclass="badgebadge-success">在线</span></div><divclass="flexjustify-between"><span>/data0/doris/storage(172.17.237.6:8040)</span><spanclass="badgebadge-success">在线</span></div><divclass="flexjustify-between"><span>/data1/doris/storage(172.17.237.4:8040)</span><spanclass="badgebadge-success">在线</span></div><divclass="flexjustify-between"><span>/data0/doris/storage(172.17.237.4:8040)</span><spanclass="badgebadge-success">在线</span></div></div></div><pclass="mt-4text-smtext-gray-600">所有磁盘状态均正常，无异常节点，系统稳定性良好。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[1]]</a></cite></p></div></section><sectionclass="mb-12"><h2class="section-title">2.磁盘容量使用率分析</h2><divclass="bg-whitep-6rounded-lgshadow-mdcard"><pclass="mb-6">基于<code>doris_be_disks_local_used_capacity</code>和<code>doris_be_disks_total_capacity</code>指标，计算各磁盘路径的使用率，结果如下：</p><divclass="overflow-x-auto"><tableclass="min-w-fulldivide-ydivide-gray-200table-auto"><theadclass="bg-gray-50"><tr><thclass="px-6py-3text-lefttext-xsfont-mediumtext-gray-500uppercasetracking-wider">节点与路径</th><thclass="px-6py-3text-lefttext-xsfont-mediumtext-gray-500uppercasetracking-wider">已用容量</th><thclass="px-6py-3text-lefttext-xsfont-mediumtext-gray-500uppercasetracking-wider">总容量</th><thclass="px-6py-3text-lefttext-xsfont-mediumtext-gray-500uppercasetracking-wider">使用率</th><thclass="px-6py-3text-lefttext-xsfont-mediumtext-gray-500uppercasetracking-wider">状态</th></tr></thead><tbodyclass="bg-whitedivide-ydivide-gray-200"><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.5:8040<br><spanclass="text-gray-500">/data0/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">372.46GB</td><tdclass="px-6py-4whitespace-nowraptext-sm">3.84TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:9.7%"></div></div><spanclass="font-medium">9.7%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.5:8040<br><spanclass="text-gray-500">/data1/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">3.20MB</td><tdclass="px-6py-4whitespace-nowraptext-sm">43.19TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:0.007%"></div></div><spanclass="font-medium">0.007%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.6:8040<br><spanclass="text-gray-500">/data1/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">9.67MB</td><tdclass="px-6py-4whitespace-nowraptext-sm">43.19TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:0.022%"></div></div><spanclass="font-medium">0.022%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.6:8040<br><spanclass="text-gray-500">/data0/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">696.94GB</td><tdclass="px-6py-4whitespace-nowraptext-sm">3.84TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:18.1%"></div></div><spanclass="font-medium">18.1%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.4:8040<br><spanclass="text-gray-500">/data1/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">116.75GB</td><tdclass="px-6py-4whitespace-nowraptext-sm">43.19TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:0.27%"></div></div><spanclass="font-medium">0.27%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr><tr><tdclass="px-6py-4whitespace-nowraptext-smfont-medium">172.17.237.4:8040<br><spanclass="text-gray-500">/data0/doris/storage</span></td><tdclass="px-6py-4whitespace-nowraptext-sm">954.24GB</td><tdclass="px-6py-4whitespace-nowraptext-sm">3.84TB</td><tdclass="px-6py-4whitespace-nowraptext-sm"><divclass="flexitems-center"><divclass="w-fullbg-gray-200rounded-fullh-2.5mr-2"><divclass="bg-blue-600h-2.5rounded-full"style="width:24.8%"></div></div><spanclass="font-medium">24.8%</span></div></td><tdclass="px-6py-4whitespace-nowrap"><spanclass="badgebadge-success">正常</span></td></tr></tbody></table></div><pclass="mt-6text-smtext-gray-600">所有磁盘使用率均低于30%，当前容量压力较小，系统运行在安全阈值内。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[2]]</a></cite></p></div></section><sectionclass="mb-12"><h2class="section-title">3./data0与/data1路径使用率差异分析</h2><divclass="bg-whitep-6rounded-lgshadow-mdcard"><pclass="mb-6">通过对比不同路径的容量使用情况，发现显著的使用模式差异：</p><divclass="gridgrid-cols-1md:grid-cols-2gap-8"><div><h3class="text-xlfont-semiboldtext-gray-800mb-4">/data0路径使用特征</h3><ulclass="space-y-3"><liclass="data-point">所有节点的<code>/data0</code>路径均承载了主要数据负载，使用率范围为<strong>9.7%-24.8%</strong>。</li><liclass="data-point">该路径总容量为3.84TB，是较小容量的磁盘，但使用率稳定且合理。</li><liclass="data-point">在三个节点中，<code>/data0</code>路径的使用率均显著高于同节点的<code>/data1</code>路径。</li></ul></div><div><h3class="text-xlfont-semiboldtext-gray-800mb-4">/data1路径使用特征</h3><ulclass="space-y-3"><liclass="data-point">所有节点的<code>/data1</code>路径容量巨大（43.19TB），但当前使用率极低，范围为<strong>0.007%-0.27%</strong>。</li><liclass="data-point">该路径可能被配置为备用或冷数据存储，当前几乎未被使用。</li><liclass="data-point">存在明显的容量分配不均，<code>/data1</code>路径的总容量是<code>/data0</code>的约11.25倍，但使用量不足其1%。</li></ul></div></div><divclass="mt-8p-4bg-yellow-50borderborder-yellow-200rounded-lg"><h4class="font-semiboldtext-yellow-800mb-2flexitems-center"><iclass="fasfa-exclamation-trianglemr-2"></i>关键发现</h4><pclass="text-yellow-700text-sm">所有节点均存在<code>/data0</code>与<code>/data1</code>路径容量分配严重不均衡的问题。当前数据主要写入<code>/data0</code>，而容量大得多的<code>/data1</code>几乎闲置，这可能导致<code>/data0</code>路径在未来成为性能瓶颈，而<code>/data1</code>路径资源被严重浪费。</p></div><pclass="mt-6text-smtext-gray-600">该模式表明存储策略可能未被正确配置或监控，需立即审查Doris的存储均衡策略。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[3]]</a></cite></p></div></section><sectionclass="mb-12"><h2class="section-title">4.容量监控与优化建议</h2><divclass="bg-whitep-6rounded-lgshadow-mdcard"><olclass="list-decimallist-insidespace-y-4text-gray-800"><liclass="data-point"><strong>立即审查存储策略：</strong>检查Doris集群的存储均衡配置，确保数据能均匀分布在<code>/data0</code>和<code>/data1</code>路径上，避免单路径过载。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[4]]</a></cite></li><liclass="data-point"><strong>启用容量预警：</strong>建议为<code>/data0</code>路径设置容量使用率预警阈值（如70%），并为<code>/data1</code>路径设置低使用率告警（如<5%），以主动发现异常。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[5]]</a></cite></li><liclass="data-point"><strong>数据迁移规划：</strong>若存储策略允许，可计划将部分<code>/data0</code>路径上的数据迁移至<code>/data1</code>路径，以平衡负载并延长集群整体生命周期。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[6]]</a></cite></li><liclass="data-point"><strong>定期审计：</strong>建议每月对所有BE节点的磁盘使用情况进行审计，确保容量分配策略持续有效，避免因数据增长导致的突发性容量危机。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[7]]</a></cite></li><liclass="data-point"><strong>监控指标扩展：</strong>建议增加对磁盘I/O吞吐量和延迟的监控，以全面评估存储性能，而不仅仅是容量。<cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">[[8]]</a></cite></li></ol><divclass="mt-8p-4bg-blue-50borderborder-blue-200rounded-lg"><h4class="font-semiboldtext-blue-800mb-2flexitems-center"><iclass="fasfa-lightbulbmr-2"></i>总结</h4><pclass="text-blue-700text-sm">当前DorisBE节点磁盘在线状态良好，无任何故障。但存在严重的存储路径容量分配不均问题，<code>/data0</code>路径使用率远高于<code>/data1</code>路径，存在潜在的性能瓶颈和资源浪费风险。建议立即采取措施优化存储策略，以保障集群长期稳定运行。</p></div></div></section><sectionclass="mb-12"><h2class="section-title">参考文献</h2><divclass="bg-whitep-6rounded-lgshadow-mdcard"><olclass="list-decimallist-insidespace-y-2text-gray-800"><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">DorisBE节点磁盘状态监控数据</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">DorisBE节点磁盘已用容量监控数据</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">DorisBE节点磁盘总容量监控数据</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">Doris存储均衡策略配置文档</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">Prometheus告警规则配置指南</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">Doris数据迁移操作手册</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">集群运维审计最佳实践</a></cite></li><li><cite><ahref="http://static-resources"target="_blank"rel="noopenernoreferrer">存储性能监控指标定义</a></cite></li></ol></div></section></div><footerclass="footer">CreatedbyAutobots<br>页面内容均由AI生成，仅供参考</footer></body></html>