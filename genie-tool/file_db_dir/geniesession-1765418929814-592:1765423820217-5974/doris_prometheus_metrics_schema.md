#ApacheDoris监控指标宽表建表语句（基于Prometheus指标体系）##表结构设计说明本表为ApacheDoris监控系统核心宽表，专为存储和分析来自Prometheus的Doris集群监控指标而设计。该表基于GrafanaDashboard中提取的全部Prometheus指标（如`doris_fe_query_total`、`doris_be_cpu`、`doris_be_memory_allocated_bytes`等）及标签维度（`job`、`instance`、`group`、`mode`、`type`等）进行结构化建模，遵循ApacheDoris最佳实践，采用`DUPLICATEKEY`模型，支持高并发写入、高效聚合查询与时间序列分析。表设计充分考虑了监控数据的时序特性、多维度标签嵌套结构、动态分区需求与存储效率，适用于构建企业级Doris集群监控平台、告警系统、容量规划与性能调优分析。本表以`timestamp`、`cluster_name`、`metric_name`、`instance`作为复合主键（DUPLICATEKEY），确保同一时间点、同一集群、同一指标、同一实例的监控数据可被唯一标识。所有非键字段均采用`JSON`类型存储原始标签（labels），以支持灵活的标签扩展与动态维度分析，避免因新增标签导致表结构变更。数据按天进行动态分区，便于冷热数据分离与快速清理历史数据。分桶策略采用`HASH`分桶，基于`cluster_name`和`metric_name`进行哈希分布，确保数据在BE节点间均匀分布，提升并行查询性能。该表将作为Doris监控数据湖的核心存储层，支撑Grafana仪表盘、Prometheus查询引擎、自定义分析脚本、AI异常检测模型等下游系统的数据消费。所有字段均附带详细注释，明确其来源、语义、单位与使用场景，便于运维、开发与数据分析师快速理解与使用。##宽表建表语句```sql--创建Doris集群监控指标宽表--本表用于存储从Prometheus采集的ApacheDoris集群所有监控指标数据--数据来源：GrafanaDashboard中配置的Prometheus数据源（uid:cf6jrqutcxjb4b）--采集指标包括：FE/BE状态、JVM内存、CPU使用率、磁盘容量、QPS、Compaction分数、EditLog操作、Image写入/推送、BDBJE延迟等--采用DUPLICATEKEY模型，支持高吞吐写入与灵活查询--按天动态分区，便于数据生命周期管理--使用HASH分桶，基于cluster_name和metric_name分布，提升查询并行度--所有标签信息以JSON格式存储，支持动态扩展，避免表结构变更--字段命名与Prometheus指标名称保持一致，便于映射与调试CREATETABLEIFNOTEXISTSdoris_monitor_metrics(--时间戳，精确到毫秒，表示该监控指标被采集的时间点--来源：Prometheus采集时间戳，通常为Unix时间戳（秒或毫秒）--用途：时间序列分析、趋势图绘制、告警时间窗口计算timestampDATETIMENOTNULLCOMMENT'监控指标采集时间戳，单位：毫秒，格式：YYYY-MM-DDHH:MM:SS',--集群名称，标识该指标所属的Doris集群--来源：Prometheus指标中的`job`标签，通常为部署时配置的集群标识符（如：doris-prod-01,doris-test-02）--用途：多集群监控隔离、跨集群对比分析、权限隔离cluster_nameVARCHAR(128)NOTNULLCOMMENT'Doris集群名称，对应Prometheus指标的job标签，如：doris-prod-01',--指标名称，表示监控指标的唯一标识符--来源：Prometheus指标名称，如：doris_fe_query_total、doris_be_cpu、doris_be_memory_allocated_bytes等--用途：指标分类、聚合计算、仪表盘配置、告警规则匹配metric_nameVARCHAR(256)NOTNULLCOMMENT'Prometheus指标名称，如：doris_fe_query_total、doris_be_cpu、doris_be_memory_allocated_bytes',--实例地址，表示该指标采集自的具体节点--来源：Prometheus指标中的`instance`标签，格式通常为：ip:port，如：172.17.237.10:8040--用途：节点级监控、故障定位、资源分配分析instanceVARCHAR(128)NOTNULLCOMMENT'监控指标所属的节点实例地址，格式：ip:port，如：172.17.237.10:8040',--原始标签集合，以JSON格式存储所有附加的Prometheus标签（除job、instance外）--包含但不限于：group、type、mode、state、quantile、db、device、path、user、workload_group等--用途：多维度下钻分析、标签过滤、动态聚合、标签关联分析--示例：{"group":"fe","type":"used","quantile":"0.99","workload_group":"default"}labelsJSONNOTNULLCOMMENT'Prometheus指标的原始标签集合，JSON格式，包含除job和instance外的所有标签，如：{"group":"fe","type":"used","quantile":"0.99"}',--指标数值，表示该监控指标在指定时间点的测量值--来源：Prometheus指标采集的原始数值，单位依指标而定（如：字节、百分比、次数、毫秒）--用途：核心监控值、阈值告警、趋势计算、性能评估valueDOUBLENOTNULLCOMMENT'监控指标的数值，单位依指标而定，如：字节、百分比、次数、毫秒',--数据写入时间，由Doris系统自动记录，表示该条记录被写入Doris表的时间--用途：数据延迟分析、ETL流水线监控、数据一致性校验etl_timestampDATETIMENOTNULLDEFAULTCURRENT_TIMESTAMPCOMMENT'数据写入Doris表的时间戳，由系统自动填充',--数据版本号，用于支持未来可能的Schema变更或数据重算--初始值为1，后续可由ETL系统在数据重处理时递增versionINTNOTNULLDEFAULT1COMMENT'数据版本号，用于支持数据重处理与Schema变更，初始值为1',--指标类型分类，用于快速区分指标所属模块（FE/BE/Cluster）--由metric_name自动推断，如：以doris_fe_开头为FE指标，doris_be_开头为BE指标，其余为集群级指标--用途：仪表盘分组、权限控制、查询优化metric_typeENUM('FE','BE','CLUSTER','UNKNOWN')NOTNULLDEFAULT'UNKNOWN'COMMENT'指标类型，根据metric_name自动分类：FE、BE、CLUSTER、UNKNOWN',--指标单位，用于标注数值的物理单位，便于展示与理解--由系统根据metric_name预定义映射，如：doris_be_memory_allocated_bytes->'bytes'，doris_be_cpu->'%'--用途：图表单位显示、告警阈值配置、数据标准化unitVARCHAR(32)NOTNULLDEFAULT''COMMENT'指标单位，如：bytes、%、ms、count、requests/s，由系统根据metric_name预定义映射',--指标采集频率，表示该指标在Prometheus中的采集间隔（秒）--由系统根据指标名称与采集策略预设，如：doris_be_cpu为15s，doris_fe_edit_log为60s--用途：数据密度分析、采样率校验、告警灵敏度调整scrape_interval_secINTNOTNULLDEFAULT15COMMENT'Prometheus采集间隔（秒），由系统根据指标预设，如：15、60、300',--指标是否为计数器（Counter）类型--由系统根据metric_name预定义，如：以_total结尾的指标通常为计数器--用途：计算速率（rate）、区分增量与瞬时值is_counterBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为计数器类型指标，由系统根据metric_name预定义，如：doris_fe_query_total为true',--指标是否为直方图（Histogram）或摘要（Summary）的分位数--由labels中是否存在quantile标签判断--用途：区分P50、P90、P99等分位数指标is_quantileBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为分位数指标（如P99），由labels中是否存在quantile标签判断',--指标是否为状态指标（0/1表示健康/异常）--由metric_name或value范围判断，如：up{group='fe'}为0或1--用途：快速识别节点宕机、服务不可用is_statusBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为状态指标（0/1），如：up{group="fe"}，由metric_name或value范围判断',--指标是否为容量指标（总容量、已用容量）--由metric_name包含capacity、used、total等关键词判断--用途：容量规划、磁盘/内存使用率计算is_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为容量指标（如total、used），由metric_name关键词判断',--指标是否为延迟指标（单位为毫秒）--由metric_name包含latency、duration、time等关键词判断--用途：性能瓶颈分析、SLA监控is_latencyBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为延迟指标（单位：毫秒），由metric_name关键词判断',--指标是否为吞吐指标（单位为每秒请求数、字节数）--由metric_name包含rate、throughput、bytes_per_sec等关键词判断--用途：系统负载评估、资源利用率分析is_throughputBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为吞吐指标（如requests/s、bytes/s），由metric_name关键词判断',--指标是否为资源使用指标（CPU、内存、IO、网络）--由metric_name包含cpu、memory、disk、io、network等关键词判断--用途：资源瓶颈定位、容量预测is_resourceBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为资源使用指标（CPU、内存、IO、网络），由metric_name关键词判断',--指标是否为系统级指标（非用户查询相关）--由metric_name是否包含compaction、editlog、image、gc、jvm、fd、thread等关键词判断--用途：区分用户负载与系统内部活动is_systemBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统内部指标（如compaction、editlog、jvm、gc），由metric_name关键词判断',--指标是否为用户查询相关指标--由metric_name包含query、scan、fragment、load、request等关键词判断--用途：区分用户负载与系统维护活动is_user_queryBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为用户查询相关指标（如query、scan、load），由metric_name关键词判断',--指标是否为高价值指标（用于告警与核心监控看板）--由运维团队预定义，如：FE/BE状态、QPS、内存使用率、磁盘使用率、JVMGC频率--用途：告警优先级、看板展示、巡检重点is_criticalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为高价值核心指标，由运维团队预定义，如：FE/BE状态、QPS、内存使用率',--指标是否为已弃用指标--由系统维护，用于标记已被新指标替代或不再采集的旧指标--用途：数据清理、告警规则维护is_deprecatedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为已弃用指标，由系统维护，用于标记不再采集的旧指标',--指标是否为实验性指标--由系统维护，用于标记尚未稳定或仅在特定版本中提供的指标--用途：版本兼容性管理、测试环境监控is_experimentalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为实验性指标，由系统维护，用于标记尚未稳定的指标',--指标是否为聚合指标（由多个原始指标计算得出）--由系统维护，用于标记由PrometheusPromQL计算得出的衍生指标--用途：溯源分析、计算逻辑审计is_derivedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为衍生聚合指标，由PrometheusPromQL计算得出，如：CPU使用率=1-idle',--指标是否为采样指标（仅采集部分节点）--由系统维护，用于标记仅在部分BE/FE实例上采集的指标--用途：数据完整性校验、采样偏差分析is_sampledBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为采样指标，仅在部分实例上采集，由系统维护',--指标是否为需要特殊处理的指标（如：需要除以节点数、需要取最大值）--由系统维护，用于标记需要特殊聚合逻辑的指标--用途：查询优化、聚合函数选择needs_special_aggregationBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否需要特殊聚合逻辑，如：取最大值、除以节点数，由系统维护',--指标是否为可恢复指标（如：磁盘状态、服务状态）--由系统维护，用于标记在节点恢复后可自动恢复正常值的指标--用途：告警抑制、恢复确认is_recoverableBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为可恢复指标，如：服务状态、磁盘状态，节点恢复后可自动恢复正常',--指标是否为不可恢复指标（如：累计请求数、累计写入字节数）--由系统维护，用于标记单调递增、不可重置的指标--用途：速率计算、异常检测is_monotonicBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为单调递增指标，如：累计请求数、累计写入字节数，不可重置',--指标是否为瞬时指标（InstantGauge）--由系统维护，用于标记表示当前瞬时状态的指标--用途：实时监控、状态快照is_gaugeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为瞬时指标（Gauge），表示当前瞬时状态，如：内存使用量、CPU使用率',--指标是否为计数指标（Counter，非速率）--由系统维护，用于标记表示累计次数的指标--用途：总量统计、增长趋势is_counter_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为累计计数指标（CounterTotal），如：doris_fe_query_total',--指标是否为速率指标（Rate）--由系统维护，用于标记表示单位时间变化率的指标--用途：性能评估、负载分析is_rateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为速率指标（Rate），如：rate(doris_fe_query_total[5m])',--指标是否为百分比指标--由系统维护，用于标记值域为0~100的指标--用途：阈值告警、可视化展示is_percentageBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为百分比指标，值域通常为0~100，如：CPU使用率、缓存命中率',--指标是否为字节指标--由系统维护，用于标记单位为字节的指标--用途：容量规划、存储分析is_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为字节指标，单位为bytes，如：内存使用量、磁盘使用量',--指标是否为时间指标（单位为毫秒、微秒）--由系统维护，用于标记单位为时间的指标--用途：延迟分析、SLA计算is_timeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为时间指标，单位为ms或us，如：查询延迟、写入延迟',--指标是否为计数指标（单位为次数）--由系统维护，用于标记单位为次数的指标--用途：事件统计、频率分析is_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为计数指标，单位为count，如：查询次数、写入次数',--指标是否为连接数指标--由系统维护，用于标记表示连接数的指标--用途：并发能力评估、连接池监控is_connectionBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为连接数指标，如：broker_file_open_reading、http_stream_current_processing',--指标是否为线程池指标--由系统维护，用于标记表示线程池状态的指标--用途：资源竞争分析、任务积压检测is_thread_poolBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为线程池指标，如：flush_thread_pool_queue_size、heavy_work_pool_queue_size',--指标是否为缓存指标--由系统维护，用于标记表示缓存状态的指标--用途：缓存效率分析、内存优化is_cacheBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存指标，如：doris_be_cache_hit_ratio、doris_be_cache_usage',--指标是否为GC指标--由系统维护，用于标记表示JVM垃圾回收的指标--用途：JVM性能调优、内存泄漏检测is_gcBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVMGC指标，如：doris_be_jvm_gc',--指标是否为文件句柄指标--由系统维护，用于标记表示文件描述符使用的指标--用途：系统资源限制监控、异常连接检测is_fdBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为文件描述符指标，如：doris_be_fd_num_used、doris_be_fd_num_limit',--指标是否为网络指标--由系统维护，用于标记表示网络流量的指标--用途：网络带宽分析、跨节点通信瓶颈is_networkBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为网络指标，如：doris_be_max_network_receive_bytes_rate、doris_be_max_network_send_bytes_rate',--指标是否为磁盘指标--由系统维护，用于标记表示磁盘状态的指标--用途：存储健康度监控、IO瓶颈分析is_diskBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘指标，如：doris_be_disks_state、doris_be_disks_local_used_capacity',--指标是否为内存指标--由系统维护，用于标记表示内存使用的指标--用途：内存泄漏检测、OOM预警is_memoryBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为内存指标，如：doris_be_memory_allocated_bytes、doris_be_jvm_heap_size_bytes',--指标是否为CPU指标--由系统维护，用于标记表示CPU使用的指标--用途：计算资源瓶颈分析、负载均衡is_cpuBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为CPU指标，如：doris_be_cpu、doris_be_load_average',--指标是否为Compaction指标--由系统维护，用于标记表示Compaction状态的指标--用途：存储引擎性能优化、写放大分析is_compactionBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Compaction指标，如：doris_be_compaction_bytes_total、doris_be_disks_compaction_score',--指标是否为EditLog指标--由系统维护，用于标记表示FEEditLog操作的指标--用途：元数据一致性监控、FE高可用分析is_editlogBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为EditLog指标，如：doris_fe_edit_log、doris_fe_editlog_write_latency_ms',--指标是否为Image指标--由系统维护，用于标记表示FEImage写入/推送的指标--用途：元数据快照健康度、FE恢复能力评估is_imageBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image指标，如：doris_fe_image_write、doris_fe_image_push',--指标是否为BDBJE指标--由系统维护，用于标记表示BDBJE（BerkeleyDBJavaEdition）操作的指标--用途：FE高可用底层协议监控is_bdbjeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BDBJE指标，如：doris_fe_editlog_write_latency_ms、doris_fe_max_journal_id',--指标是否为Load指标--由系统维护，用于标记表示数据导入状态的指标--用途：ETL流水线监控、导入性能分析is_loadBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Load指标，如：doris_be_load_rows、doris_be_load_bytes',--指标是否为Scan指标--由系统维护，用于标记表示查询扫描状态的指标--用途：查询性能分析、资源消耗评估is_scanBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Scan指标，如：doris_be_active_scan_context_count、doris_be_local_bytes_read_total',--指标是否为Fragment指标--由系统维护，用于标记表示Fragment执行状态的指标--用途：查询执行计划分析、并行度监控is_fragmentBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Fragment指标，如：doris_be_fragment_instance_count、doris_be_fragment_request_duration_us',--指标是否为HTTP指标--由系统维护，用于标记表示HTTP服务状态的指标--用途：API服务健康度、外部访问监控is_httpBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为HTTP指标，如：doris_be_http_stream_requests_total、doris_be_http_stream_duration_ms',--指标是否为Broker指标--由系统维护，用于标记表示Broker文件读取的指标--用途：外部存储访问性能分析is_brokerBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Broker指标，如：doris_be_broker_file_open_reading、doris_be_broker_file_reader_total',--指标是否为HDFS指标--由系统维护，用于标记表示HDFS文件读取的指标--用途：HDFS存储访问性能分析is_hdfsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为HDFS指标，如：doris_be_hdfs_file_open_reading、doris_be_hdfs_file_reader_total',--指标是否为LocalFile指标--由系统维护，用于标记表示本地文件读写的指标--用途：本地存储性能分析is_local_fileBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为本地文件指标，如：doris_be_local_file_open_reading、doris_be_local_file_reader_total',--指标是否为JVM指标--由系统维护，用于标记表示JVM运行时状态的指标--用途：JVM性能调优、内存泄漏检测is_jvmBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM指标，如：doris_be_jvm_heap_size_bytes、doris_be_jvm_thread',--指标是否为MemoryPool指标--由系统维护，用于标记表示Doris内存池使用的指标--用途：内存管理优化、内存碎片分析is_memory_poolBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为内存池指标，如：doris_be_memory_pool_bytes_total',--指标是否为Jemalloc指标--由系统维护，用于标记表示Jemalloc内存分配器状态的指标--用途：底层内存分配器性能分析is_jemallocBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc指标，如：doris_be_memory_jemalloc_allocated_bytes、doris_be_memory_jemalloc_resident_bytes',--指标是否为Page指标--由系统维护，用于标记表示操作系统页面交换的指标--用途：系统内存压力分析is_pageBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Page指标，如：doris_be_memory_pgpgin、doris_be_memory_pgpgout',--指标是否为Swap指标--由系统维护，用于标记表示操作系统交换分区使用的指标--用途：内存不足预警is_swapBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Swap指标，如：doris_be_memory_pswpin、doris_be_memory_pswpout',--指标是否为IOUtil指标--由系统维护，用于标记表示磁盘IO利用率的指标--用途：IO瓶颈分析、存储性能评估is_io_utilBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为IO利用率指标，如：doris_be_max_disk_io_util_percent',--指标是否为LoadAverage指标--由系统维护，用于标记表示系统负载平均值的指标--用途：系统整体负载评估is_load_averageBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为LoadAverage指标，如：doris_be_load_average',--指标是否为CacheHitRatio指标--由系统维护，用于标记表示缓存命中率的指标--用途：缓存效率评估is_cache_hit_ratioBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存命中率指标，如：doris_be_cache_hit_ratio',--指标是否为CacheUsage指标--由系统维护，用于标记表示缓存使用量的指标--用途：缓存容量规划is_cache_usageBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存使用量指标，如：doris_be_cache_usage',--指标是否为CacheCapacity指标--由系统维护，用于标记表示缓存容量的指标--用途：缓存容量规划is_cache_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存容量指标，如：doris_be_cache_capacity',--指标是否为CacheElementCount指标--由系统维护，用于标记表示缓存元素数量的指标--用途：缓存规模分析is_cache_element_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存元素数量指标，如：doris_be_cache_element_count',--指标是否为CacheLookupCount指标--由系统维护，用于标记表示缓存查找次数的指标--用途：缓存访问频率分析is_cache_lookup_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存查找次数指标，如：doris_be_cache_lookup_count',--指标是否为CacheHitCount指标--由系统维护，用于标记表示缓存命中次数的指标--用途：缓存效率分析is_cache_hit_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为缓存命中次数指标，如：doris_be_cache_hit_count',--指标是否为DiskState指标--由系统维护，用于标记表示磁盘状态（0=异常，1=正常）的指标--用途：存储健康度监控is_disk_stateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘状态指标（0=异常，1=正常），如：doris_be_disks_state',--指标是否为DiskCapacity指标--由系统维护，用于标记表示磁盘容量的指标--用途：容量规划、告警is_disk_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘容量指标，如：doris_be_disks_total_capacity、doris_be_disks_local_used_capacity',--指标是否为DiskCompactionScore指标--由系统维护，用于标记表示磁盘Compaction分数的指标--用途：存储引擎性能优化is_disk_compaction_scoreBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘Compaction分数指标，如：doris_be_disks_compaction_score',--指标是否为DiskCompactionNum指标--由系统维护，用于标记表示磁盘Compaction任务数量的指标--用途：Compaction负载分析is_disk_compaction_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘Compaction任务数量指标，如：doris_be_disks_compaction_num',--指标是否为DiskTrashUsedCapacity指标--由系统维护，用于标记表示磁盘垃圾回收空间使用的指标--用途：存储空间回收效率分析is_disk_trash_used_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘垃圾回收空间使用量指标，如：doris_be_disks_trash_used_capacity',--指标是否为DiskAvailCapacity指标--由系统维护，用于标记表示磁盘可用容量的指标--用途：容量告警、资源规划is_disk_avail_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为磁盘可用容量指标，如：doris_be_disks_avail_capacity',--指标是否为DiskRemoteUsedCapacity指标--由系统维护，用于标记表示远程存储（如S3）使用量的指标--用途：混合存储架构分析is_disk_remote_used_capacityBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为远程存储使用量指标，如：doris_be_disks_remote_used_capacity',--指标是否为FENodeCount指标--由系统维护，用于标记表示FE节点总数的指标--用途：集群规模监控is_fe_node_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FE节点总数指标，如：count(up{group="fe"})',--指标是否为FEAliveCount指标--由系统维护，用于标记表示FE活跃节点数的指标--用途：高可用状态监控is_fe_alive_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FE活跃节点数指标，如：count(up{group="fe"}==1)',--指标是否为BENodeCount指标--由系统维护，用于标记表示BE节点总数的指标--用途：集群规模监控is_be_node_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE节点总数指标，如：count(up{group="be"})',--指标是否为BEAliveCount指标--由系统维护，用于标记表示BE活跃节点数的指标--用途：高可用状态监控is_be_alive_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE活跃节点数指标，如：count(up{group="be"}==1)',--指标是否为ClusterQPS指标--由系统维护，用于标记表示集群每秒查询数的指标--用途：负载评估、容量规划is_cluster_qpsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为集群QPS指标，如：sum(rate(doris_fe_query_total[5m]))',--指标是否为FEJVMHeapStat指标--由系统维护，用于标记表示FEJVM堆内存使用率的指标--用途：JVM内存监控is_fe_jvm_heap_statBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FEJVM堆内存使用率指标，如：sum(jvm_heap_size_bytes{group="fe",type="used"})/sum(jvm_heap_size_bytes{group="fe",type="max"})',--指标是否为BECPUIdle指标--由系统维护，用于标记表示BECPU空闲率的指标--用途：计算资源利用率分析is_be_cpu_idleBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BECPU空闲率指标，如：(sum(rate(doris_be_cpu{mode="idle"}[5m]))/sum(rate(doris_be_cpu[5m])))',--指标是否为BEMemStat指标--由系统维护，用于标记表示BE内存分配量的指标--用途：内存使用监控is_be_mem_statBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE内存分配量指标，如：avg(doris_be_memory_allocated_bytes)',--指标是否为MaxReplayedJournalID指标--由系统维护，用于标记表示FE最大重放日志ID的指标--用途：元数据同步状态监控is_max_replayed_journal_idBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FE最大重放日志ID指标，如：doris_fe_max_journal_id',--指标是否为ImageWriteSuccess指标--由系统维护，用于标记表示Image写入成功的次数--用途：元数据快照健康度is_image_write_successBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image写入成功次数指标，如：doris_fe_image_write{type="success"}',--指标是否为ImageWriteFailed指标--由系统维护，用于标记表示Image写入失败的次数--用途：元数据快照异常监控is_image_write_failedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image写入失败次数指标，如：doris_fe_image_write{type="failed"}',--指标是否为ImagePushSuccess指标--由系统维护，用于标记表示Image推送成功的次数--用途：元数据同步健康度is_image_push_successBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image推送成功次数指标，如：doris_fe_image_push{type="success"}',--指标是否为ImagePushFailed指标--由系统维护，用于标记表示Image推送失败的次数--用途：元数据同步异常监控is_image_push_failedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image推送失败次数指标，如：doris_fe_image_push{type="failed"}',--指标是否为ImageCleanSuccess指标--由系统维护，用于标记表示Image清理成功的次数--用途：元数据清理健康度is_image_clean_successBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image清理成功次数指标，如：doris_fe_image_clean{type="success"}',--指标是否为ImageCleanFailed指标--由系统维护，用于标记表示Image清理失败的次数--用途：元数据清理异常监控is_image_clean_failedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Image清理失败次数指标，如：doris_fe_image_clean{type="failed"}',--指标是否为BDBJEWriteLatency指标--由系统维护，用于标记表示BDBJE写入延迟的指标--用途：FE高可用性能监控is_bdbje_write_latencyBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BDBJE写入延迟指标，如：doris_fe_editlog_write_latency_ms{quantile="0.99"}',--指标是否为BDBJEWriteRate指标--由系统维护，用于标记表示BDBJE写入速率的指标--用途：元数据写入负载分析is_bdbje_write_rateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BDBJE写入速率指标，如：rate(doris_fe_edit_log{type="write"}[5m])',--指标是否为BDBJEReadRate指标--由系统维护，用于标记表示BDBJE读取速率的指标--用途：元数据读取负载分析is_bdbje_read_rateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BDBJE读取速率指标，如：rate(doris_fe_edit_log{type="read"}[5m])',--指标是否为EditLogSize指标--由系统维护，用于标记表示EditLog文件大小的指标--用途：元数据存储空间监控is_edit_log_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为EditLog文件大小指标，如：doris_fe_edit_log{type="bytes"}',--指标是否为EditLogCleanSuccess指标--由系统维护，用于标记表示EditLog清理成功的次数--用途：元数据清理健康度is_edit_log_clean_successBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为EditLog清理成功次数指标，如：doris_fe_edit_log_clean{type="success"}',--指标是否为EditLogCleanFailed指标--由系统维护，用于标记表示EditLog清理失败的次数--用途：元数据清理异常监控is_edit_log_clean_failedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为EditLog清理失败次数指标，如：doris_fe_edit_log_clean{type="failed"}',--指标是否为FECompactionScore指标--由系统维护，用于标记表示FE收集的TabletCompaction最大分数的指标--用途：存储引擎负载分析is_fe_compaction_scoreBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FE收集的TabletCompaction最大分数指标，如：doris_fe_max_tablet_compaction_score',--指标是否为BECompactionScore指标--由系统维护，用于标记表示BE上TabletCompaction最大分数的指标--用途：存储引擎负载分析is_be_compaction_scoreBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE上TabletCompaction最大分数指标，如：doris_fe_tablet_max_compaction_score',--指标是否为SchedulingTablets指标--由系统维护，用于标记表示FE调度的Tablet数量的指标--用途：负载均衡分析is_scheduling_tabletsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为FE调度的Tablet数量指标，如：doris_fe_scheduled_tablet_num',--指标是否为BEIOUtil指标--由系统维护，用于标记表示BE最大磁盘IO利用率的指标--用途：IO瓶颈分析is_be_io_utilBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE最大磁盘IO利用率指标，如：doris_be_max_disk_io_util_percent',--指标是否为BEMemoryConsumption指标--由系统维护，用于标记表示BE内存消耗总量的指标--用途：内存使用监控is_be_mem_consumptionBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE内存消耗总量指标，如：doris_be_mem_consumption',--指标是否为BEMemoryJemallocActiveBytes指标--由系统维护，用于标记表示Jemalloc分配的活跃内存字节数的指标--用途：底层内存分配分析is_be_mem_jemalloc_active_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc分配的活跃内存字节数指标，如：doris_be_memory_jemalloc_active_bytes',--指标是否为BEMemoryJemallocAllocatedBytes指标--由系统维护，用于标记表示Jemalloc已分配内存字节数的指标--用途：底层内存分配分析is_be_mem_jemalloc_allocated_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc已分配内存字节数指标，如：doris_be_memory_jemalloc_allocated_bytes',--指标是否为BEMemoryJemallocDirtyPurgedNum指标--由系统维护，用于标记表示Jemalloc脏页回收次数的指标--用途：内存回收效率分析is_be_mem_jemalloc_dirty_purged_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc脏页回收次数指标，如：doris_be_memory_jemalloc_dirty_purged_num',--指标是否为BEMemoryJemallocMappedBytes指标--由系统维护，用于标记表示Jemalloc映射内存字节数的指标--用途：内存映射分析is_be_mem_jemalloc_mapped_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc映射内存字节数指标，如：doris_be_memory_jemalloc_mapped_bytes',--指标是否为BEMemoryJemallocMetadataBytes指标--由系统维护，用于标记表示Jemalloc元数据内存字节数的指标--用途：内存开销分析is_be_mem_jemalloc_metadata_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc元数据内存字节数指标，如：doris_be_memory_jemalloc_metadata_bytes',--指标是否为BEMemoryJemallocMuzzyPurgedNum指标--由系统维护，用于标记表示Jemallocmuzzy页回收次数的指标--用途：内存回收效率分析is_be_mem_jemalloc_muzzy_purged_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemallocmuzzy页回收次数指标，如：doris_be_memory_jemalloc_muzzy_purged_num',--指标是否为BEMemoryJemallocPactiveNum指标--由系统维护，用于标记表示Jemalloc活跃页数量的指标--用途：内存页管理分析is_be_mem_jemalloc_pactive_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc活跃页数量指标，如：doris_be_memory_jemalloc_pactive_num',--指标是否为BEMemoryJemallocPdirtyNum指标--由系统维护，用于标记表示Jemalloc脏页数量的指标--用途：内存回收压力分析is_be_mem_jemalloc_pdirty_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc脏页数量指标，如：doris_be_memory_jemalloc_pdirty_num',--指标是否为BEMemoryJemallocPmuzzyNum指标--由系统维护，用于标记表示Jemallocmuzzy页数量的指标--用途：内存回收压力分析is_be_mem_jemalloc_pmuzzy_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemallocmuzzy页数量指标，如：doris_be_memory_jemalloc_pmuzzy_num',--指标是否为BEMemoryJemallocResidentBytes指标--由系统维护，用于标记表示Jemalloc实际占用物理内存字节数的指标--用途：真实内存占用监控is_be_mem_jemalloc_resident_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc实际占用物理内存字节数指标，如：doris_be_memory_jemalloc_resident_bytes',--指标是否为BEMemoryJemallocRetainedBytes指标--由系统维护，用于标记表示Jemalloc保留内存字节数的指标--用途：内存释放效率分析is_be_mem_jemalloc_retained_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc保留内存字节数指标，如：doris_be_memory_jemalloc_retained_bytes',--指标是否为BEMemoryJemallocTcacheBytes指标--由系统维护，用于标记表示Jemalloc线程缓存内存字节数的指标--用途：多线程内存分配分析is_be_mem_jemalloc_tcache_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc线程缓存内存字节数指标，如：doris_be_memory_jemalloc_tcache_bytes',--指标是否为BEMemoryPgpgin指标--由系统维护，用于标记表示系统每秒从磁盘读入的页数的指标--用途：系统内存压力分析is_be_mem_pgpginBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒从磁盘读入的页数指标，如：doris_be_memory_pgpgin',--指标是否为BEMemoryPgpgout指标--由系统维护，用于标记表示系统每秒写入磁盘的页数的指标--用途：系统内存压力分析is_be_mem_pgpgoutBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒写入磁盘的页数指标，如：doris_be_memory_pgpgout',--指标是否为BEMemoryPswpin指标--由系统维护，用于标记表示系统每秒从交换分区读入的页数的指标--用途：Swap使用监控is_be_mem_pswpinBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒从交换分区读入的页数指标，如：doris_be_memory_pswpin',--指标是否为BEMemoryPswpout指标--由系统维护，用于标记表示系统每秒写入交换分区的页数的指标--用途：Swap使用监控is_be_mem_pswpoutBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒写入交换分区的页数指标，如：doris_be_memory_pswpout',--指标是否为BELoadBytes指标--由系统维护，用于标记表示BE加载的字节数的指标--用途：数据导入性能分析is_be_load_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE加载的字节数指标，如：doris_be_load_bytes',--指标是否为BELoadRows指标--由系统维护，用于标记表示BE加载的行数的指标--用途：数据导入性能分析is_be_load_rowsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE加载的行数指标，如：doris_be_load_rows',--指标是否为BELoadChannelCount指标--由系统维护，用于标记表示BE当前活跃的LoadChannel数量的指标--用途：导入并发度监控is_be_load_channel_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前活跃的LoadChannel数量指标，如：doris_be_load_channel_count',--指标是否为BELocalBytesReadTotal指标--由系统维护，用于标记表示BE本地文件读取总字节数的指标--用途：本地存储访问分析is_be_local_bytes_read_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地文件读取总字节数指标，如：doris_be_local_bytes_read_total',--指标是否为BELocalBytesWrittenTotal指标--由系统维护，用于标记表示BE本地文件写入总字节数的指标--用途：本地存储访问分析is_be_local_bytes_written_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地文件写入总字节数指标，如：doris_be_local_bytes_written_total',--指标是否为BELocalFileOpenReading指标--由系统维护，用于标记表示BE当前打开的本地文件读取句柄数的指标--用途：文件句柄使用监控is_be_local_file_open_readingBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前打开的本地文件读取句柄数指标，如：doris_be_local_file_open_reading',--指标是否为BELocalFileOpenWriting指标--由系统维护，用于标记表示BE当前打开的本地文件写入句柄数的指标--用途：文件句柄使用监控is_be_local_file_open_writingBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前打开的本地文件写入句柄数指标，如：doris_be_local_file_open_writing',--指标是否为BELocalFileReaderTotal指标--由系统维护，用于标记表示BE本地文件读取器总次数的指标--用途：本地存储访问频率分析is_be_local_file_reader_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地文件读取器总次数指标，如：doris_be_local_file_reader_total',--指标是否为BELocalFileWriterTotal指标--由系统维护，用于标记表示BE本地文件写入器总次数的指标--用途：本地存储访问频率分析is_be_local_file_writer_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地文件写入器总次数指标，如：doris_be_local_file_writer_total',--指标是否为BELocalScanThreadPoolQueueSize指标--由系统维护，用于标记表示BE本地扫描线程池队列长度的指标--用途：查询任务积压分析is_be_local_scan_thread_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地扫描线程池队列长度指标，如：doris_be_local_scan_thread_pool_queue_size',--指标是否为BELocalScanThreadPoolThreadNum指标--由系统维护，用于标记表示BE本地扫描线程池线程数的指标--用途：查询并发能力分析is_be_local_scan_thread_pool_thread_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE本地扫描线程池线程数指标，如：doris_be_local_scan_thread_pool_thread_num',--指标是否为BELimitedScanThreadPoolQueueSize指标--由系统维护，用于标记表示BE限流扫描线程池队列长度的指标--用途：查询资源隔离分析is_be_limited_scan_thread_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE限流扫描线程池队列长度指标，如：doris_be_limited_scan_thread_pool_queue_size',--指标是否为BELimitedScanThreadPoolThreadNum指标--由系统维护，用于标记表示BE限流扫描线程池线程数的指标--用途：查询资源隔离分析is_be_limited_scan_thread_pool_thread_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE限流扫描线程池线程数指标，如：doris_be_limited_scan_thread_pool_thread_num',--指标是否为BEHeavyWorkActiveThreads指标--由系统维护，用于标记表示BE重型工作线程活跃数的指标--用途：计算资源占用分析is_be_heavy_work_active_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE重型工作线程活跃数指标，如：doris_be_heavy_work_active_threads',--指标是否为BEHeavyWorkMaxThreads指标--由系统维护，用于标记表示BE重型工作线程最大线程数的指标--用途：计算资源上限监控is_be_heavy_work_max_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE重型工作线程最大线程数指标，如：doris_be_heavy_work_max_threads',--指标是否为BEHeavyWorkPoolMaxQueueSize指标--由系统维护，用于标记表示BE重型工作线程池最大队列长度的指标--用途：任务积压预警is_be_heavy_work_pool_max_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE重型工作线程池最大队列长度指标，如：doris_be_heavy_work_pool_max_queue_size',--指标是否为BEHeavyWorkPoolQueueSize指标--由系统维护，用于标记表示BE重型工作线程池当前队列长度的指标--用途：任务积压分析is_be_heavy_work_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE重型工作线程池当前队列长度指标，如：doris_be_heavy_work_pool_queue_size',--指标是否为BELightWorkActiveThreads指标--由系统维护，用于标记表示BE轻量工作线程活跃数的指标--用途：计算资源占用分析is_be_light_work_active_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE轻量工作线程活跃数指标，如：doris_be_light_work_active_threads',--指标是否为BELightWorkMaxThreads指标--由系统维护，用于标记表示BE轻量工作线程最大线程数的指标--用途：计算资源上限监控is_be_light_work_max_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE轻量工作线程最大线程数指标，如：doris_be_light_work_max_threads',--指标是否为BELightWorkPoolMaxQueueSize指标--由系统维护，用于标记表示BE轻量工作线程池最大队列长度的指标--用途：任务积压预警is_be_light_work_pool_max_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE轻量工作线程池最大队列长度指标，如：doris_be_light_work_pool_max_queue_size',--指标是否为BELightWorkPoolQueueSize指标--由系统维护，用于标记表示BE轻量工作线程池当前队列长度的指标--用途：任务积压分析is_be_light_work_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE轻量工作线程池当前队列长度指标，如：doris_be_light_work_pool_queue_size',--指标是否为BEFlushThreadPoolQueueSize指标--由系统维护，用于标记表示BEFlush线程池队列长度的指标--用途：写入性能分析is_be_flush_thread_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEFlush线程池队列长度指标，如：doris_be_flush_thread_pool_queue_size',--指标是否为BEFlushThreadPoolThreadNum指标--由系统维护，用于标记表示BEFlush线程池线程数的指标--用途：写入并发能力分析is_be_flush_thread_pool_thread_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEFlush线程池线程数指标，如：doris_be_flush_thread_pool_thread_num',--指标是否为BEFragmentInstanceCount指标--由系统维护，用于标记表示BE当前活跃的Fragment实例数的指标--用途：查询并发度监控is_be_fragment_instance_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前活跃的Fragment实例数指标，如：doris_be_fragment_instance_count',--指标是否为BEFragmentRequestDurationUs指标--由系统维护，用于标记表示BEFragment请求处理时长（微秒）的指标--用途：查询延迟分析is_be_fragment_request_duration_usBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEFragment请求处理时长（微秒）指标，如：doris_be_fragment_request_duration_us',--指标是否为BEFragmentRequestsTotal指标--由系统维护，用于标记表示BE处理的Fragment请求数的指标--用途：查询负载分析is_be_fragment_requests_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE处理的Fragment请求数指标，如：doris_be_fragment_requests_total',--指标是否为BEFragmentThreadPoolQueueSize指标--由系统维护，用于标记表示BEFragment线程池队列长度的指标--用途：查询任务积压分析is_be_fragment_thread_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEFragment线程池队列长度指标，如：doris_be_fragment_thread_pool_queue_size',--指标是否为BEEngineRequestsTotal指标--由系统维护，用于标记表示BE引擎总请求数的指标--用途：整体负载分析is_be_engine_requests_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE引擎总请求数指标，如：doris_be_engine_requests_total',--指标是否为BEArrowFlightWorkActiveThreads指标--由系统维护，用于标记表示BEArrowFlight工作线程活跃数的指标--用途：ArrowFlight服务负载分析is_be_arrow_flight_work_active_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEArrowFlight工作线程活跃数指标，如：doris_be_arrow_flight_work_active_threads',--指标是否为BEArrowFlightWorkMaxThreads指标--由系统维护，用于标记表示BEArrowFlight工作线程最大线程数的指标--用途：ArrowFlight服务上限监控is_be_arrow_flight_work_max_threadsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEArrowFlight工作线程最大线程数指标，如：doris_be_arrow_flight_work_max_threads',--指标是否为BEArrowFlightWorkPoolMaxQueueSize指标--由系统维护，用于标记表示BEArrowFlight工作线程池最大队列长度的指标--用途：ArrowFlight任务积压预警is_be_arrow_flight_work_pool_max_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEArrowFlight工作线程池最大队列长度指标，如：doris_be_arrow_flight_work_pool_max_queue_size',--指标是否为BEArrowFlightWorkPoolQueueSize指标--由系统维护，用于标记表示BEArrowFlight工作线程池当前队列长度的指标--用途：ArrowFlight任务积压分析is_be_arrow_flight_work_pool_queue_sizeBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEArrowFlight工作线程池当前队列长度指标，如：doris_be_arrow_flight_work_pool_queue_size',--指标是否为BEBrokerCount指标--由系统维护，用于标记表示BE配置的Broker数量的指标--用途：外部存储连接配置监控is_be_broker_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE配置的Broker数量指标，如：doris_be_broker_count',--指标是否为BEBrokerFileOpenReading指标--由系统维护，用于标记表示BE当前打开的Broker文件读取句柄数的指标--用途：外部存储连接监控is_be_broker_file_open_readingBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前打开的Broker文件读取句柄数指标，如：doris_be_broker_file_open_reading',--指标是否为BEBrokerFileReaderTotal指标--由系统维护，用于标记表示BEBroker文件读取器总次数的指标--用途：外部存储访问频率分析is_be_broker_file_reader_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEBroker文件读取器总次数指标，如：doris_be_broker_file_reader_total',--指标是否为BEBrpcEndpointStubCount指标--由系统维护，用于标记表示BEBrpc端点存根数量的指标--用途：内部通信连接监控is_be_brpc_endpoint_stub_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEBrpc端点存根数量指标，如：doris_be_brpc_endpoint_stub_count',--指标是否为BEBrpcFunctionEndpointStubCount指标--由系统维护，用于标记表示BEBrpc函数端点存根数量的指标--用途：内部通信连接监控is_be_brpc_function_endpoint_stub_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEBrpc函数端点存根数量指标，如：doris_be_brpc_function_endpoint_stub_count',--指标是否为BEBrpcStreamEndpointStubCount指标--由系统维护，用于标记表示BEBrpc流式端点存根数量的指标--用途：内部通信连接监控is_be_brpc_stream_endpoint_stub_countBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEBrpc流式端点存根数量指标，如：doris_be_brpc_stream_endpoint_stub_count',--指标是否为BEHttpStreamCurrentProcessing指标--由系统维护，用于标记表示BE当前正在处理的HTTP流请求数量的指标--用途：HTTP服务负载分析is_be_http_stream_current_processingBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE当前正在处理的HTTP流请求数量指标，如：doris_be_http_stream_current_processing',--指标是否为BEHttpStreamDurationMs指标--由系统维护，用于标记表示BEHTTP流请求处理时长（毫秒）的指标--用途：HTTP服务延迟分析is_be_http_stream_duration_msBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEHTTP流请求处理时长（毫秒）指标，如：doris_be_http_stream_duration_ms',--指标是否为BEHttpStreamRequestsTotal指标--由系统维护，用于标记表示BEHTTP流请求总次数的指标--用途：HTTP服务负载分析is_be_http_stream_requests_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BEHTTP流请求总次数指标，如：doris_be_http_stream_requests_total',--指标是否为BEJVMGC指标--由系统维护，用于标记表示JVM垃圾回收次数的指标--用途：JVM性能监控is_be_jvm_gcBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM垃圾回收次数指标，如：doris_be_jvm_gc',--指标是否为BEJVMHeapSizeBytes指标--由系统维护，用于标记表示JVM堆内存大小（字节）的指标--用途：JVM内存监控is_be_jvm_heap_size_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM堆内存大小（字节）指标，如：doris_be_jvm_heap_size_bytes',--指标是否为BEJVMNonHeapSizeBytes指标--由系统维护，用于标记表示JVM非堆内存大小（字节）的指标--用途：JVM内存监控is_be_jvm_non_heap_size_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM非堆内存大小（字节）指标，如：doris_be_jvm_non_heap_size_bytes',--指标是否为BEJVMOldSizeBytes指标--由系统维护，用于标记表示JVM老年代内存大小（字节）的指标--用途：JVM内存监控is_be_jvm_old_size_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM老年代内存大小（字节）指标，如：doris_be_jvm_old_size_bytes',--指标是否为BEJVMThread指标--由系统维护，用于标记表示JVM线程数的指标--用途：JVM资源使用监控is_be_jvm_threadBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM线程数指标，如：doris_be_jvm_thread',--指标是否为BEJVMYoungSizeBytes指标--由系统维护，用于标记表示JVM年轻代内存大小（字节）的指标--用途：JVM内存监控is_be_jvm_young_size_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为JVM年轻代内存大小（字节）指标，如：doris_be_jvm_young_size_bytes',--指标是否为BEAllRowsetsNum指标--由系统维护，用于标记表示BE上所有Rowset数量的指标--用途：存储引擎状态监控is_be_all_rowsets_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE上所有Rowset数量指标，如：doris_be_all_rowsets_num',--指标是否为BEAllSegmentsNum指标--由系统维护，用于标记表示BE上所有Segment数量的指标--用途：存储引擎状态监控is_be_all_segments_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE上所有Segment数量指标，如：doris_be_all_segments_num',--指标是否为BECompactionBytesTotal指标--由系统维护，用于标记表示BECompaction总处理字节数的指标--用途：存储引擎写放大分析is_be_compaction_bytes_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BECompaction总处理字节数指标，如：doris_be_compaction_bytes_total',--指标是否为BECompactionDeltasTotal指标--由系统维护，用于标记表示BECompaction总处理Delta文件数的指标--用途：存储引擎写放大分析is_be_compaction_deltas_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BECompaction总处理Delta文件数指标，如：doris_be_compaction_deltas_total',--指标是否为BECompactionUsedPermits指标--由系统维护，用于标记表示BECompaction已使用许可数的指标--用途：Compaction资源占用分析is_be_compaction_used_permitsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BECompaction已使用许可数指标，如：doris_be_compaction_used_permits',--指标是否为BECompactionWaittingPermits指标--由系统维护，用于标记表示BECompaction等待许可数的指标--用途：Compaction资源竞争分析is_be_compaction_waitting_permitsBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BECompaction等待许可数指标，如：doris_be_compaction_waitting_permits',--指标是否为BEAvailCpuNum指标--由系统维护，用于标记表示BE可用CPU核数的指标--用途：计算资源评估is_be_avail_cpu_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE可用CPU核数指标，如：doris_be_avail_cpu_num',--指标是否为BEHostCpuNum指标--由系统维护，用于标记表示BE所在主机CPU核数的指标--用途：硬件资源评估is_be_host_cpu_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE所在主机CPU核数指标，如：doris_be_host_cpu_num',--指标是否为BEFdNumLimit指标--由系统维护，用于标记表示BE文件描述符限制数的指标--用途：系统资源限制监控is_be_fd_num_limitBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE文件描述符限制数指标，如：doris_be_fd_num_limit',--指标是否为BEFdNumUsed指标--由系统维护，用于标记表示BE已使用文件描述符数的指标--用途：系统资源使用监控is_be_fd_num_usedBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE已使用文件描述符数指标，如：doris_be_fd_num_used',--指标是否为BEFileCreatedTotal指标--由系统维护，用于标记表示BE创建的文件总数的指标--用途：存储操作频率分析is_be_file_created_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE创建的文件总数指标，如：doris_be_file_created_total',--指标是否为BEMaxNetworkReceiveBytesRate指标--由系统维护，用于标记表示BE最大网络接收速率（字节/秒）的指标--用途：网络带宽分析is_be_max_network_receive_bytes_rateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE最大网络接收速率（字节/秒）指标，如：doris_be_max_network_receive_bytes_rate',--指标是否为BEMaxNetworkSendBytesRate指标--由系统维护，用于标记表示BE最大网络发送速率（字节/秒）的指标--用途：网络带宽分析is_be_max_network_send_bytes_rateBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE最大网络发送速率（字节/秒）指标，如：doris_be_max_network_send_bytes_rate',--指标是否为BEMemoryPoolBytesTotal指标--由系统维护，用于标记表示BE内存池总字节数的指标--用途：内存管理分析is_be_memory_pool_bytes_totalBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE内存池总字节数指标，如：doris_be_memory_pool_bytes_total',--指标是否为BEMemoryAllocatedBytes指标--由系统维护，用于标记表示BE已分配内存字节数的指标--用途：内存使用监控is_be_memory_allocated_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为BE已分配内存字节数指标，如：doris_be_memory_allocated_bytes',--指标是否为BEMemoryJemallocActiveBytes指标--由系统维护，用于标记表示Jemalloc分配的活跃内存字节数的指标--用途：底层内存分配分析is_be_memory_jemalloc_active_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc分配的活跃内存字节数指标，如：doris_be_memory_jemalloc_active_bytes',--指标是否为BEMemoryJemallocAllocatedBytes指标--由系统维护，用于标记表示Jemalloc已分配内存字节数的指标--用途：底层内存分配分析is_be_memory_jemalloc_allocated_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc已分配内存字节数指标，如：doris_be_memory_jemalloc_allocated_bytes',--指标是否为BEMemoryJemallocDirtyPurgedNum指标--由系统维护，用于标记表示Jemalloc脏页回收次数的指标--用途：内存回收效率分析is_be_memory_jemalloc_dirty_purged_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc脏页回收次数指标，如：doris_be_memory_jemalloc_dirty_purged_num',--指标是否为BEMemoryJemallocMappedBytes指标--由系统维护，用于标记表示Jemalloc映射内存字节数的指标--用途：内存映射分析is_be_memory_jemalloc_mapped_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc映射内存字节数指标，如：doris_be_memory_jemalloc_mapped_bytes',--指标是否为BEMemoryJemallocMetadataBytes指标--由系统维护，用于标记表示Jemalloc元数据内存字节数的指标--用途：内存开销分析is_be_memory_jemalloc_metadata_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc元数据内存字节数指标，如：doris_be_memory_jemalloc_metadata_bytes',--指标是否为BEMemoryJemallocMuzzyPurgedNum指标--由系统维护，用于标记表示Jemallocmuzzy页回收次数的指标--用途：内存回收效率分析is_be_memory_jemalloc_muzzy_purged_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemallocmuzzy页回收次数指标，如：doris_be_memory_jemalloc_muzzy_purged_num',--指标是否为BEMemoryJemallocPactiveNum指标--由系统维护，用于标记表示Jemalloc活跃页数量的指标--用途：内存页管理分析is_be_memory_jemalloc_pactive_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc活跃页数量指标，如：doris_be_memory_jemalloc_pactive_num',--指标是否为BEMemoryJemallocPdirtyNum指标--由系统维护，用于标记表示Jemalloc脏页数量的指标--用途：内存回收压力分析is_be_memory_jemalloc_pdirty_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc脏页数量指标，如：doris_be_memory_jemalloc_pdirty_num',--指标是否为BEMemoryJemallocPmuzzyNum指标--由系统维护，用于标记表示Jemallocmuzzy页数量的指标--用途：内存回收压力分析is_be_memory_jemalloc_pmuzzy_numBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemallocmuzzy页数量指标，如：doris_be_memory_jemalloc_pmuzzy_num',--指标是否为BEMemoryJemallocResidentBytes指标--由系统维护，用于标记表示Jemalloc实际占用物理内存字节数的指标--用途：真实内存占用监控is_be_memory_jemalloc_resident_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc实际占用物理内存字节数指标，如：doris_be_memory_jemalloc_resident_bytes',--指标是否为BEMemoryJemallocRetainedBytes指标--由系统维护，用于标记表示Jemalloc保留内存字节数的指标--用途：内存释放效率分析is_be_memory_jemalloc_retained_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc保留内存字节数指标，如：doris_be_memory_jemalloc_retained_bytes',--指标是否为BEMemoryJemallocTcacheBytes指标--由系统维护，用于标记表示Jemalloc线程缓存内存字节数的指标--用途：多线程内存分配分析is_be_memory_jemalloc_tcache_bytesBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为Jemalloc线程缓存内存字节数指标，如：doris_be_memory_jemalloc_tcache_bytes',--指标是否为BEMemoryPgpgin指标--由系统维护，用于标记表示系统每秒从磁盘读入的页数的指标--用途：系统内存压力分析is_be_memory_pgpginBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒从磁盘读入的页数指标，如：doris_be_memory_pgpgin',--指标是否为BEMemoryPgpgout指标--由系统维护，用于标记表示系统每秒写入磁盘的页数的指标--用途：系统内存压力分析is_be_memory_pgpgoutBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒写入磁盘的页数指标，如：doris_be_memory_pgpgout',--指标是否为BEMemoryPswpin指标--由系统维护，用于标记表示系统每秒从交换分区读入的页数的指标--用途：Swap使用监控is_be_memory_pswpinBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒从交换分区读入的页数指标，如：doris_be_memory_pswpin',--指标是否为BEMemoryPswpout指标--由系统维护，用于标记表示系统每秒写入交换分区的页数的指标--用途：Swap使用监控is_be_memory_pswpoutBOOLEANNOTNULLDEFAULTFALSECOMMENT'是否为系统每秒写入交换分区的页数指标，如：doris_be_memory_pswpout')DUPLICATEKEY(timestamp,cluster_name,metric_name,instance)PARTITIONBYRANGE(timestamp)(PARTITIONp20251210VALUESLESSTHAN("2025-12-11"),PARTITIONp20251211VALUESLESSTHAN("2025-12-12"),PARTITIONp20251212VALUESLESSTHAN("2025-12-13"),PARTITIONp20251213VALUESLESSTHAN("2025-12-14"),PARTITIONp20251214VALUESLESSTHAN("2025-12-15"),PARTITIONp20251215VALUESLESSTHAN("2025-12-16"),PARTITIONp20251216VALUESLESSTHAN("2025-12-17"),PARTITIONp20251217VALUESLESSTHAN("2025-12-18"),PARTITIONp20251218VALUESLESSTHAN("2025-12-19"),PARTITIONp20251219VALUESLESSTHAN("2025-12-20"),PARTITIONp20251220VALUESLESSTHAN("2025-12-21"),PARTITIONp20251221VALUESLESSTHAN("2025-12-22"),PARTITIONp20251222VALUESLESSTHAN("2025-12-23"),PARTITIONp20251223VALUESLESSTHAN("2025-12-24"),PARTITIONp20251224VALUESLESSTHAN("2025-12-25"),PARTITIONp20251225VALUESLESSTHAN("2025-12-26"),PARTITIONp20251226VALUESLESSTHAN("2025-12-27"),PARTITIONp20251227VALUESLESSTHAN("2025-12-28"),PARTITIONp20251228VALUESLESSTHAN("2025-12-29"),PARTITIONp20251229VALUESLESSTHAN("2025-12-30"),PARTITIONp20251230VALUESLESSTHAN("2026-01-01"))DISTRIBUTEDBYHASH(cluster_name,metric_name)BUCKETS32PROPERTIES("replication_num"="3","storage_medium"="SSD","storage_cooldown_time"="2026-01-0100:00:00","dynamic_partition.enable"="true","dynamic_partition.time_unit"="DAY","dynamic_partition.start"="-30","dynamic_partition.end"="3","dynamic_partition.prefix"="p","dynamic_partition.buckets"="32","in_memory"="false","enable_persistent_index"="true","compression"="LZ4");```##表结构设计核心原则说明###1.复合主键设计（DUPLICATEKEY）本表采用`timestamp`、`cluster_name`、`metric_name`、`instance`作为复合主键，其设计依据如下：-**`timestamp`**：作为时间序列数据的核心维度，确保每条记录具有明确的时间戳，支持按时间范围查询、聚合与趋势分析。-**`cluster_name`**：用于区分多个Doris集群，避免不同集群的监控数据混杂，支持跨集群对比分析。-**`metric_name`**：唯一标识监控指标，如`doris_fe_query_total`、`doris_be_cpu`，是查询与聚合的核心依据。-**`instance`**：标识指标来源的具体节点（IP:Port），支持节点级故障定位与资源使用分析。该复合主键设计确保了数据的唯一性，同时满足了监控系统对高并发写入、低延迟查询、多维度聚合的性能要求。在Doris的`DUPLICATEKEY`模型下，当插入相同主键的记录时，系统会自动覆盖旧值，适用于监控数据“最新值覆盖”的业务场景。###2.动态分区策略本表采用**按天动态分区**策略，通过`PARTITIONBYRANGE(timestamp)`实现。分区策略设计如下：-**预创建分区**：当前已预创建从`p20251210`至`p20251230`的21个分区，覆盖未来20天的数据写入需求。-**动态分区启用**：`dynamic_partition.enable=true`，系统将自动根据当前日期创建未来3天的分区（`dynamic_partition.end=3`），并自动删除30天前的旧分区（`dynamic_partition.start=-30`）。-**分区前缀**：`dynamic_partition.prefix="p"`，确保分区名称格式统一，便于运维管理。-**存储冷却**：`storage_cooldown_time="2026-01-0100:00:00"`，表示所有数据在2026年1月1日后将自动从SSD迁移至HDD，降低存储成本。该策略有效实现了**冷热数据分离**，高频查询的近期数据（如最近7天）存储在高性能SSD上，历史数据自动归档至低成本存储介质，兼顾性能与成本。###3.HASH分桶策略本表采用`DISTRIBUTEDBYHASH(cluster_name,metric_name)BUCKETS32`进行数据分桶，其设计优势如下：-**分桶键选择**：选择`cluster_name`和`metric_name`作为分桶键，确保同一集群的同一类指标（如所有FE的QPS）被分配到相同的BE节点，提升聚合查询（如`SUM(value)`）的局部性，减少跨节点数据传输。-**分桶数量**：设置为32个分桶，是Doris推荐的中等规模集群分桶数，可有效平衡数据分布均匀性与查询并行度。若集群BE节点数为8~16，32个分桶可确保每个BE节点承载2~4个分桶，实现负载均衡。-**避免使用instance**：不将`instance`作为分桶键，避免因节点增减导致数据重分布，提升集群弹性。###4.JSON标签存储设计所有Prometheus标签（除`job`和`instance`外）均以`JSON`格式存储于`labels`字段，其设计优势包括：-**动态扩展性**：当Prometheus新增标签（如`workload_group`、`db`）时，无需修改表结构，系统自动兼容。-**查询灵活性**：可通过Doris的JSON函数（如`json_extract(labels,'$.group')`）进行标签过滤与聚合，支持复杂维度分析。-**存储效率**：相比为每个标签创建独立列，JSON存储显著减少列数，降低元数据开销，提升表管理效率。###5.指标元信息字段设计本表包含超过80个布尔型元信息字段（如`is_cpu`、`is_memory`、`is_compaction`、`is_critical`），其设计目的为：-**自动化分类**：通过ETL系统在写入前根据`metric_name`和`labels`自动打标，避免查询时重复解析。-**查询优化**：在构建仪表盘或告警规则时，可直接使用`WHEREis_critical=trueANDis_fe=true`快速筛选核心指标，提升查询效率。-**数据治理**：为指标生命周期管理（如弃用、实验性）提供结构化支持，便于运维团队进行指标审计与清理。###6.存储与压缩策略-**存储介质**：`storage_medium="SSD"`，确保监控数据的高IOPS读写性能，满足实时查询需求。-**压缩算法**：`compression="LZ4"`，在压缩率与解压速度之间取得最佳平衡，适合高频写入的监控场景。-**持久化索引**：`enable_persistent_index="true"`，提升点查与范围查询性能，尤其在`instance`或`metric_name`精确查询时表现优异。###7.复制与高可用-**副本数**：`replication_num="3"`，确保每个分桶数据在3个BE节点上均有副本，即使单节点故障，数据仍可访问，保障监控系统高可用。##表使用示例与典型查询###示例1：查询某集群过去24小时的FEQPS趋势```sqlSELECTtimestamp,valueASqpsFROMdoris_monitor_metricsWHEREcluster_name='doris-prod-01'ANDmetric_name='doris_fe_query_total'ANDtimestamp>=now()-interval24hourORDERBYtimestamp;```###示例2：查询所有BE节点的内存使用率（百分比）```sqlSELECTinstance,MAX(CASEWHENmetric_name='doris_be_memory_allocated_bytes'THENvalueEND)ASmemory_allocated_bytes,MAX(CASEWHENmetric_name='doris_be_jvm_heap_size_bytes'ANDjson_extract(labels,'$.type')='max'THENvalueEND)ASjvm_heap_max_bytes,(MAX(CASEWHENmetric_name='doris_be_memory_allocated_bytes'THENvalueEND)*100.0/MAX(CASEWHENmetric_name='doris_be_jvm_heap_size_bytes'ANDjson_extract(labels,'$.type')='max'THENvalueEND))ASmemory_usage_percentFROMdoris_monitor_metricsWHEREcluster_name='doris-prod-01'ANDmetric_nameIN('doris_be_memory_allocated_bytes','doris_be_jvm_heap_size_bytes')ANDtimestamp>=now()-interval1hourGROUPBYinstanceHAVINGmemory_usage_percent>80;```###示例3：统计所有集群中磁盘使用率超过90%的BE节点```sqlSELECTcluster_name,instance,MAX(CASEWHENmetric_name='doris_be_disks_local_used_capacity'THENvalueEND)ASused_capacity_bytes,MAX(CASEWHENmetric_name='doris_be_disks_total_capacity'THENvalueEND)AStotal_capacity_bytes,(MAX(CASEWHENmetric_name='doris_be_disks_local_used_capacity'THENvalueEND)*100.0/MAX(CASEWHENmetric_name='doris_be_disks_total_capacity'THENvalueEND))ASdisk_usage_percentFROMdoris_monitor_metricsWHEREmetric_nameIN('doris_be_disks_local_used_capacity','doris_be_disks_total_capacity')ANDtimestamp>=now()-interval1hourGROUPBYcluster_name,instanceHAVINGdisk_usage_percent>90;```###示例4：分析FE的BDBJE写入延迟P99```sqlSELECTtimestamp,valueASbdbje_write_latency_p99_msFROMdoris_monitor_metricsWHEREcluster_name='doris-prod-01'ANDmetric_name='doris_fe_editlog_write_latency_ms'ANDjson_extract(labels,'$.quantile')='0.99'ORDERBYtimestampDESCLIMIT100;```###示例5：监控Compaction负载最高的BE节点```sqlSELECTinstance,MAX(value)ASmax_compaction_scoreFROMdoris_monitor_metricsWHEREcluster_name='doris-prod-01'ANDmetric_name='doris_be_disks_compaction_score'ANDtimestamp>=now()-interval1hourGROUPBYinstanceORDERBYmax_compaction_scoreDESCLIMIT10;```##表维护与扩展建议###1.数据写入建议-**ETL工具**：建议使用**FlinkCDC**或**PrometheusRemoteWrite**+**DorisStreamLoad**实现高吞吐写入。-**写入频率**：建议Prometheus采集间隔为15s，Doris写入批次为1000~5000条/次，避免小批次高频写入。-**数据校验**：在ETL层增加`timestamp`合法性校验（如不能为未来时间）、`value`非负校验（对计数器）、`instance`格式校验（IP:Port）。###2.查询性能优化建议-**物化视图**：对高频聚合查询（如每分钟QPS、每小时内存使用率）创建物化视图，加速查询。-**索引建议**：对`cluster_name`、`metric_name`、`timestamp`建立前缀索引，提升范围查询效率。-**避免SELECT***：查询时明确指定所需字段，减少数据传输量。###3.扩展性建议-**多集群支持**：本表设计天然支持多集群，无需修改结构，只需确保`cluster_name`唯一。-**标签扩展**：未来若需支持`db`、`user`等业务标签，可直接在`labels`JSON中添加，无需建表变更。-**指标分类升级**：可将`is_*`字段迁移到独立的`metric_metadata`维度表，实现更复杂的指标元数据管理。##总结本宽表设计是基于Prometheus监控体系构建的Doris监控数据存储核心，具备以下核心优势：-**全面性**：覆盖Doris所有核心监控指标，无遗漏。-**灵活性**：JSON标签支持动态扩展，适应未来指标变化。-**高性能**：DUPLICATEKEY+HASH分桶+动态分区，支持高并发写入与低延迟查询。-**可维护性**：自动化分类、动态分区、存储冷却，降低运维复杂度。-**可扩展性**：支持多集群、多维度、多租户监控场景。该表可作为企业级Doris监控平台的基石，支撑从实时告警、性能分析、容量规划到AI异常检测的全栈监控需求。